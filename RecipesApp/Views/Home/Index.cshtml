@model RecipesListViewModel

@if (Model?.CurrentCategory == null)
{
	<br />
	<h3 class="text-center">Welcome to Bon Appetit!</h3>
	<br />
	<h5 class="text-center">Bon Appetit is a forum style application where users can post their favorite recipes and comment on other's recipes.</h5> 
	<br />
	<h5 class="text-center">To view currently posted recipes, click on a category on the left side pane.</h5>
	<br />
	<h5 class="text-center">To comment on a recipe or create your own, please create an account or login.</h5>
}
else {
@foreach (var p in Model?.Recipes ?? Enumerable.Empty<Recipe>())
{
	<div class="card card-outline-primary m-1 p-1">
		<div class="bg-faded p-1">
			<h4>
				@p.RecipeCategory
				@p.RecipeName
				@*<span class="badge rounded-pill bg-primary text-white"
			style="float:right">
			<small>@p.RecipeRating</small>
			</span>*@
				<span class="badge rounded-pill bg-primary text-white"
				  style="float:right">
					<small>Creator: @p.RecipeCreator</small>
				</span>
			</h4>
		</div>
		<h3>Ingredients</h3>
		<div style="white-space: pre-line" class="card-text p-1">@p.RecipeIngredients</div>
		<h3>Instructions</h3>
		<div style="white-space: pre-line" class="card-text p-1">@p.RecipeInstructions</div>
	</div>
	<br>
	<div class="form-group">
		@using (Html.BeginForm("SubmitForm", "Discussion", FormMethod.Post))
		{		
			// TODO: Capture the Recipe Name and pass it to the formcontroller
			<label for="comment">Add a comment</label>
			//<input type="hidden" name="DiscussionRecipe" id="DiscussionRecipe" value="@p.RecipeName" />
			
			//@Html.Hidden("DiscussionRecipe", (object)ViewBag.DiscussionRecipe)
			@Html.TextAreaFor(model => model.Discussion.DiscussionPost, new{@class = "form-control"})
			@Html.HiddenFor(model => model.Discussion.DiscussionRecipe, @p.RecipeName)
			<br>
			<button type="submit" class="btn btn-default bg-warning">Submit</button>
		}
	</div>
	<hr>


	@foreach (var s in Model?.Discussions ?? Enumerable.Empty<Discussion>())
	{
		@if (@s.DiscussionRecipe == @p.RecipeName)
		{
			<div class="media">
				<div class="media-left">
					<svg xmlns="http://www.w3.org/2000/svg" width="40px" height="40px" fill="currentColor" class="bi bi-person" viewBox="0 0 16 16">
						<path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z" />
					</svg>
				</div>
				<div class="media-body">
					<h4 class="media-heading">@s.DiscussionUser</h4>
					<small>@s.DiscussionDate</small>
					<p>@s.DiscussionPost</p>
				</div>
			</div>
			<hr>
		}
	}
}
<div page-model="@Model?.PagingInfo" page-action="Index" page-classes-enabled="true"
	 page-class="btn" page-class-normal="btn-outline-dark"
	 page-class-selected="btn-primary" page-url-category="@Model?.CurrentCategory!"
	 page-class-selected="btn-primary" class="btn-group pull-right m-1">
</div>
}


